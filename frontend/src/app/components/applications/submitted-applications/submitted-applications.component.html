<div class="page-title">
  <h1 style="font-family: cursive;" class="mat-display-1">Submitted Applications</h1>
</div>

<div *ngFor="let student of members$ | async; let i = index">
  
    <mat-accordion *ngIf="student.applicationSubmitted == true && student.userType == 'Student'">
        <mat-expansion-panel  >
          <mat-expansion-panel-header>
            <mat-panel-title class="md-title">
              {{student.firstName + ' ' + student.lastName}}
            </mat-panel-title>
          </mat-expansion-panel-header>

          <h4 class="mat-h2">Submitted Application</h4> 
          
          <mat-expansion-panel *ngFor="let applications of applications$ | async">
            
            <mat-expansion-panel-header *ngIf="applications.appUserId == student.id">
              <mat-panel-title >
                {{ student.studentId}}
              </mat-panel-title>

              
            </mat-expansion-panel-header>


            <div>
    
              <mat-card >
                  <mat-card-header>
                      <mat-card-title class="titleMargin">Application</mat-card-title>
                  </mat-card-header>
          
                  <mat-card-content >
          
                      <mat-card-content>
                          <form *ngIf="applications.appUserId == student.id">

                              <mat-form-field class="full-width titleMargin">
                                  <mat-label>Issue</mat-label>
                                  <input matInput [disabled]="true" id="issue" name="issue" [(ngModel)]="applications.issue" readonly>
                              </mat-form-field>
                              
                              <mat-form-field class="full-width">
                                  <mat-label>Course</mat-label>
                                  <input matInput [disabled]="true" id="course" name="course" [(ngModel)]="applications.course" readonly >
                              </mat-form-field>

                              <div>
                                  <mat-form-field class="full-width" >
                                      <mat-label>Username</mat-label>
                                      <input [disabled]="true" matInput id="usename" name="username" [(ngModel)]="student.email" readonly>
                                  </mat-form-field>

                              </div>
                          </form>
                      </mat-card-content>
                  </mat-card-content>
                  <mat-card-actions>
                      <button mat-raised-button color="primary">Approve Application</button>
                      <button mat-raised-button color="warn">Reject Application</button>
                  </mat-card-actions>
              </mat-card>
          </div>


          </mat-expansion-panel>

        </mat-expansion-panel>
      </mat-accordion>
    
      <div *ngIf="student.applicationSubmitted == false && student.userType == 'Student' && i >= 0"  class="isa_success">
        Currently no student has submitted any checklists.
    </div>
    </div>